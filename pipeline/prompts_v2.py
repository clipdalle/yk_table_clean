"""
Prompt 模板文件
存放所有 LLM 清洗任务的 Prompt
"""



# ========== 批量处理 Prompt ==========
PROMPT_BATCH = """你是一个数据清洗助手。请批量处理以下语音厅考勤数据。

**输入数据：**
{batch_data}

**已知人名参考（可选）**：
以下是常见的主持/排麦人名清单（用于辅助识别与标准化输出）。
请将识别到的同义或带装饰/大小写不同的名字，优先对齐到此清单中的“规范名”。
如果无法匹配，则按清洗后的原文输出。

{known_names}

**任务要求：**
对每一行数据，提取"主持"和"排麦人员"字段的结构化信息。

返回格式为 JSON 数组，每个元素对应一行数据：

[
  {{
    "行号": 0,
    "厅名中文": "醉春色",
    "日期": "2024年10月3日",
    "主持": {{
      "主持人员列表": ["人名1", "人名2"]
    }},
    "排麦": {{
      "排麦人员列表": ["人名1", "人名2"],
      "缺席人数": 数字,
      "置信度": "high"或"medium"或"low"
    }},
    "标准化日期": "YYYYMMDD"
  }},
  ...
]

**提取规则：**

【主持字段】
- 提取所有主持人的名字
- 多个人名通常用空格分隔
- 去除多余空格和特殊符号
- **保持人名在原文中的出现顺序**

【人名标准化（基于参考清单，可选）】
- 仅对英文大小写不敏感进行对齐（例如 Siri/siri/SIRI → Siri）；中文不改变字形。
- 去除常见花字/前后缀修饰（如 @、特殊符号、族前缀等），进行模糊比对后再匹配。
- 匹配策略：优先精确匹配；否则在参考清单里找去修饰后的最相近项（不要过度想象，明显不相干的不要强匹配）。
- 一旦匹配到参考清单项，输出该清单中的“规范名”；找不到则输出清洗后的原文。

【日期字段】
- 将输入的“日期”（原始文本）规范化为8位数字格式 YYYYMMDD（如 20100930）
- 自动识别常见写法：2024-10-03、2024/10/3、10月3日、10.3、10/03、2024年10月3日 等
- 若无法确定年份，默认使用当年；若仍不确定则返回空字符串
- 仅输出数字，不要带任何分隔符

【排麦字段】  
- 提取所有 @ 标记的人名，去除特殊符号（如 @𝓠𝓶.xxx࿐ → xxx，@ღ᭄xxx → xxx，@zᶻ.xxxᕑᗢᓫ → xxx）
- **重要：忽略"关门"、"缺X"等关键词，不要当作人名**
- 提取"缺X"信息，中文数字转阿拉伯数字（"不缺"→0）
- **保持人名在原文中的出现顺序**
 - 对每个名字应用“人名标准化”规则（如上）。

**示例：**

输入数据：
```json
[
  {{
    "行号": 0,
    "厅名中文": "醉春色",
    "日期": "2024年10月3日",
    "主持": "王摆摆  九酱",
    "排麦人员": "@zᶻ.珊珊ᕑᗢᓫ @zᶻ.璐璐ᕑᗢᓫ 关门缺2"
  }}
]
```

输出：
```json
[
  {{
    "行号": 0,
    "主持": {{
      "主持人员列表": ["王摆摆", "九酱"]
    }},
    "排麦": {{
      "排麦人员列表": ["珊珊", "璐璐"],
      "缺席人数": 2,
      "置信度": "high"
    }},
    "标准化日期": "20241003"
  }}
]

**注意：** 在实际输出到 Excel 时，人员列表会用竖线 `|` 连接，如：`王摆摆|九酱`
```

**只返回 JSON 数组，不要有任何其他文字！**
"""